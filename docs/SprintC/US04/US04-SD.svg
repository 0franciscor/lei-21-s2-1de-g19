<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1749px" preserveAspectRatio="none" style="width:2520px;height:1749px;" version="1.1" viewBox="0 0 2520 1749" width="2520px" zoomAndPan="magnify"><defs><filter height="300%" id="f1d6xczbnid9si" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="1555.5625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="42" y="99.6094"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="539" y="121.9609"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="241.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="539" y="182.6641"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="241.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="539" y="454.7734"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="241.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="539" y="726.8828"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="318.7188" style="stroke:#A80036;stroke-width:1.0;" width="10" x="539" y="998.9922"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="298.1094" style="stroke:#A80036;stroke-width:1.0;" width="10" x="539" y="1348.0625"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="181.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="968" y="213.0156"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="181.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="968" y="485.125"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="181.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="968" y="757.2344"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="241.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="968" y="1029.3438"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="276.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="968" y="1378.4141"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1184" y="243.3672"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1184" y="515.4766"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1184" y="787.5859"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1184" y="1180.3984"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1301" y="303.7188"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1430" y="364.0703"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1571" y="575.8281"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1724" y="636.1797"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1724" y="1059.6953"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1883.5" y="847.9375"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2049.5" y="908.2891"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2049.5" y="1120.0469"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2193" y="1240.75"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="139.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2193" y="1408.7656"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2198" y="1447.1172"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2198" y="1520.4688"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2466.5" y="1585.8203"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="47" x2="47" y1="89.6094" y2="1664.1719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="543.5" x2="543.5" y1="89.6094" y2="1664.1719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="972.5" x2="972.5" y1="89.6094" y2="1664.1719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1189" x2="1189" y1="89.6094" y2="1664.1719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1306" x2="1306" y1="89.6094" y2="1664.1719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1435" x2="1435" y1="89.6094" y2="1664.1719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1576" x2="1576" y1="89.6094" y2="1664.1719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1729" x2="1729" y1="89.6094" y2="1664.1719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1888" x2="1888" y1="89.6094" y2="1664.1719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2054" x2="2054" y1="89.6094" y2="1664.1719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2198" x2="2198" y1="89.6094" y2="1664.1719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2471" x2="2471" y1="1282.0547" y2="1664.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="5" y="86.5332">Receptionist</text><ellipse cx="47" cy="15" fill="#FEFECE" filter="url(#f1d6xczbnid9si)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M47,23 L47,50 M34,31 L60,31 M47,50 L34,65 M47,50 L60,65 " fill="none" filter="url(#f1d6xczbnid9si)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="5" y="1677.7051">Receptionist</text><ellipse cx="47" cy="1690.7813" fill="#FEFECE" filter="url(#f1d6xczbnid9si)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M47,1698.7813 L47,1725.7813 M34,1706.7813 L60,1706.7813 M47,1725.7813 L34,1740.7813 M47,1725.7813 L60,1740.7813 " fill="none" filter="url(#f1d6xczbnid9si)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="111" x="486.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="493.5" y="74.5332">:RegisterTestUI</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="111" x="486.5" y="1663.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="493.5" y="1684.7051">:RegisterTestUI</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="161" x="890.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="897.5" y="74.5332">:RegisterTestController</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="161" x="890.5" y="1663.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="897.5" y="1684.7051">:RegisterTestController</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="78" x="1148" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1155" y="74.5332">:Company</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="78" x="1148" y="1663.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1155" y="1684.7051">:Company</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="128" x="1240" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1247" y="74.5332">:store: ClientStore</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="128" x="1240" y="1663.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1247" y="1684.7051">:store: ClientStore</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="102" x="1382" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="1389" y="74.5332">:ClientMapper</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="102" x="1382" y="1663.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="1389" y="1684.7051">:ClientMapper</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="152" x="1498" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="1505" y="74.5332">:store: TestTypeStore</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="152" x="1498" y="1663.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="1505" y="1684.7051">:store: TestTypeStore</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="126" x="1664" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="1671" y="74.5332">:TestTypeMapper</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="126" x="1664" y="1663.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="1671" y="1684.7051">:TestTypeMapper</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="165" x="1804" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="1811" y="74.5332">:store: ParametersStore</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="165" x="1804" y="1663.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="1811" y="1684.7051">:store: ParametersStore</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="139" x="1983" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="1990" y="74.5332">:ParametersMapper</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="139" x="1983" y="1663.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="1990" y="1684.7051">:ParametersMapper</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="120" x="2136" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="2143" y="74.5332">:store: TestStore</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="120" x="2136" y="1663.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="2143" y="1684.7051">:store: TestStore</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="73" x="2433" y="1663.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="2440" y="1684.7051">test: Test</text><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="1555.5625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="42" y="99.6094"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="539" y="121.9609"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="241.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="539" y="182.6641"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="241.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="539" y="454.7734"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="241.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="539" y="726.8828"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="318.7188" style="stroke:#A80036;stroke-width:1.0;" width="10" x="539" y="998.9922"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="298.1094" style="stroke:#A80036;stroke-width:1.0;" width="10" x="539" y="1348.0625"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="181.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="968" y="213.0156"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="181.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="968" y="485.125"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="181.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="968" y="757.2344"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="241.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="968" y="1029.3438"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="276.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="968" y="1378.4141"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1184" y="243.3672"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1184" y="515.4766"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1184" y="787.5859"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1184" y="1180.3984"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1301" y="303.7188"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1430" y="364.0703"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1571" y="575.8281"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1724" y="636.1797"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1724" y="1059.6953"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1883.5" y="847.9375"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2049.5" y="908.2891"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2049.5" y="1120.0469"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2193" y="1240.75"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="139.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2193" y="1408.7656"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2198" y="1447.1172"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="28" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2198" y="1520.4688"/><rect fill="#FFFFFF" filter="url(#f1d6xczbnid9si)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2466.5" y="1585.8203"/><polygon fill="#A80036" points="527,117.9609,537,121.9609,527,125.9609,531,121.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="52" x2="533" y1="121.9609" y2="121.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="59" y="117.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="70" y="117.1045">register a test to be performed to a registered client</text><polygon fill="#A80036" points="63,148.3125,53,152.3125,63,156.3125,59,152.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="57" x2="543" y1="152.3125" y2="152.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="69" y="147.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="80" y="147.4561">request data (citizenID, nhsCode)</text><polygon fill="#A80036" points="527,178.6641,537,182.6641,527,186.6641,531,182.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="52" x2="533" y1="182.6641" y2="182.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="59" y="177.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="70" y="177.8076">types requested data</text><polygon fill="#A80036" points="956,209.0156,966,213.0156,956,217.0156,960,213.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="549" x2="962" y1="213.0156" y2="213.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="556" y="208.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="567" y="208.1592">getClient(citizenID)</text><polygon fill="#A80036" points="1172,239.3672,1182,243.3672,1172,247.3672,1176,243.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="1178" y1="243.3672" y2="243.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="985" y="238.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="996" y="238.5107">store = getClientStore()</text><polygon fill="#A80036" points="1289,299.7188,1299,303.7188,1289,307.7188,1293,303.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="1295" y1="303.7188" y2="303.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="985" y="298.8623">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="996" y="298.8623">cl = getClient(citizenID)</text><polygon fill="#A80036" points="1418,360.0703,1428,364.0703,1418,368.0703,1422,364.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="1424" y1="364.0703" y2="364.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="985" y="359.2139">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="996" y="359.2139">ClientDto = toDto(cl)</text><polygon fill="#A80036" points="63,420.4219,53,424.4219,63,428.4219,59,424.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="57" x2="543" y1="424.4219" y2="424.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="69" y="419.5654">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="327" x="80" y="419.5654">shows the client's information and request a confirmation</text><polygon fill="#A80036" points="527,450.7734,537,454.7734,527,458.7734,531,454.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="52" x2="533" y1="454.7734" y2="454.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="59" y="449.917">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="70" y="449.917">confirms the data</text><polygon fill="#A80036" points="956,481.125,966,485.125,956,489.125,960,485.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="549" x2="962" y1="485.125" y2="485.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="556" y="480.2686">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="574" y="480.2686">getAllTestType()</text><polygon fill="#A80036" points="1172,511.4766,1182,515.4766,1172,519.4766,1176,515.4766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="1178" y1="515.4766" y2="515.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="985" y="510.6201">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="1003" y="510.6201">store = getTestTypeStore()</text><polygon fill="#A80036" points="1559,571.8281,1569,575.8281,1559,579.8281,1563,575.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="1565" y1="575.8281" y2="575.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="985" y="570.9717">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="1003" y="570.9717">listTestType = getAllTestType()</text><polygon fill="#A80036" points="1712,632.1797,1722,636.1797,1712,640.1797,1716,636.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="1718" y1="636.1797" y2="636.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="985" y="631.3232">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="1003" y="631.3232">tesTypeDto = toDto(listTestType)</text><polygon fill="#A80036" points="63,692.5313,53,696.5313,63,700.5313,59,696.5313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="57" x2="543" y1="696.5313" y2="696.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="69" y="691.6748">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="87" y="691.6748">shows the test types and ask to select one</text><polygon fill="#A80036" points="527,722.8828,537,726.8828,527,730.8828,531,726.8828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="52" x2="533" y1="726.8828" y2="726.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="59" y="722.0264">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="77" y="722.0264">selects the test type</text><polygon fill="#A80036" points="956,753.2344,966,757.2344,956,761.2344,960,757.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="549" x2="962" y1="757.2344" y2="757.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="556" y="752.3779">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="574" y="752.3779">getAllParametersByTestType(testTypeDto)</text><polygon fill="#A80036" points="1172,783.5859,1182,787.5859,1172,791.5859,1176,787.5859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="1178" y1="787.5859" y2="787.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="985" y="782.7295">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1003" y="782.7295">store = getParametersStore()</text><polygon fill="#A80036" points="1871.5,843.9375,1881.5,847.9375,1871.5,851.9375,1875.5,847.9375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="1877.5" y1="847.9375" y2="847.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="985" y="843.0811">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="347" x="1003" y="843.0811">listParameters = getAllParametersByTestType(testTypeDto)</text><polygon fill="#A80036" points="2037.5,904.2891,2047.5,908.2891,2037.5,912.2891,2041.5,908.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="2043.5" y1="908.2891" y2="908.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="985" y="903.4326">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="1003" y="903.4326">list &lt;parametersDto&gt;  = toDto(listParameters)</text><polygon fill="#A80036" points="63,964.6406,53,968.6406,63,972.6406,59,968.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="57" x2="543" y1="968.6406" y2="968.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="69" y="963.7842">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="445" x="87" y="963.7842">show all parameters according to the test type and ask to select one or more</text><polygon fill="#A80036" points="527,994.9922,537,998.9922,527,1002.9922,531,998.9922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="52" x2="533" y1="998.9922" y2="998.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="59" y="994.1357">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="77" y="994.1357">selects the parameter(s) to be analysed</text><polygon fill="#A80036" points="956,1025.3438,966,1029.3438,956,1033.3438,960,1029.3438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="549" x2="962" y1="1029.3438" y2="1029.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="556" y="1024.4873">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="382" x="574" y="1024.4873">createTest(list &lt;parametersDto&gt;, tesTypeDto, citizenID, nhsCode)</text><polygon fill="#A80036" points="1712,1055.6953,1722,1059.6953,1712,1063.6953,1716,1059.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="1718" y1="1059.6953" y2="1059.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="985" y="1054.8389">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="1003" y="1054.8389">tt = toModel(testTypeDto)</text><polygon fill="#A80036" points="2037.5,1116.0469,2047.5,1120.0469,2037.5,1124.0469,2041.5,1120.0469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="2043.5" y1="1120.0469" y2="1120.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="985" y="1115.1904">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="1003" y="1115.1904">parameters = toModel (list &lt;parametersDto&gt; )</text><polygon fill="#A80036" points="1172,1176.3984,1182,1180.3984,1172,1184.3984,1176,1180.3984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="1178" y1="1180.3984" y2="1180.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="985" y="1175.542">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="1003" y="1175.542">store = getTestStore()</text><polygon fill="#A80036" points="2181,1236.75,2191,1240.75,2181,1244.75,2185,1240.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="2187" y1="1240.75" y2="1240.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="985" y="1235.8936">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251" x="1003" y="1235.8936">test = createTest (tt, parameters, nhsCode)</text><polygon fill="#A80036" points="2421,1267.1016,2431,1271.1016,2421,1275.1016,2425,1271.1016" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2198" x2="2427" y1="1271.1016" y2="1271.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="2205" y="1266.2451">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="2223" y="1266.2451">create (tt, parameters, nhsCode)</text><rect fill="#FEFECE" filter="url(#f1d6xczbnid9si)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="73" x="2433" y="1248.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="2440" y="1270.2832">test: Test</text><polygon fill="#A80036" points="63,1313.7109,53,1317.7109,63,1321.7109,59,1317.7109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="57" x2="543" y1="1317.7109" y2="1317.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="69" y="1312.8545">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="87" y="1312.8545">show all data and request a confirmation</text><polygon fill="#A80036" points="527,1344.0625,537,1348.0625,527,1352.0625,531,1348.0625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="52" x2="533" y1="1348.0625" y2="1348.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="59" y="1343.2061">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="77" y="1343.2061">confirms the data</text><polygon fill="#A80036" points="956,1374.4141,966,1378.4141,956,1382.4141,960,1378.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="549" x2="962" y1="1378.4141" y2="1378.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="556" y="1373.5576">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="574" y="1373.5576">saveTest(test)</text><polygon fill="#A80036" points="2181,1404.7656,2191,1408.7656,2181,1412.7656,2185,1408.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="2187" y1="1408.7656" y2="1408.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="985" y="1403.9092">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="1003" y="1403.9092">saveTest(test)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2208" x2="2250" y1="1439.1172" y2="1439.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2250" x2="2250" y1="1439.1172" y2="1452.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2209" x2="2250" y1="1452.1172" y2="1452.1172"/><polygon fill="#A80036" points="2219,1448.1172,2209,1452.1172,2219,1456.1172,2215,1452.1172" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="2215" y="1434.2607">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="2233" y="1434.2607">validateTest(test)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2208" x2="2250" y1="1512.4688" y2="1512.4688"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2250" x2="2250" y1="1512.4688" y2="1525.4688"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2209" x2="2250" y1="1525.4688" y2="1525.4688"/><polygon fill="#A80036" points="2219,1521.4688,2209,1525.4688,2219,1529.4688,2215,1525.4688" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="2215" y="1507.6123">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="2233" y="1507.6123">addTest(test)</text><polygon fill="#A80036" points="2454.5,1581.8203,2464.5,1585.8203,2454.5,1589.8203,2458.5,1585.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="978" x2="2460.5" y1="1585.8203" y2="1585.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="985" y="1580.9639">34</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="1003" y="1580.9639">code = generateCode()</text><polygon fill="#A80036" points="63,1642.1719,53,1646.1719,63,1650.1719,59,1646.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="57" x2="543" y1="1646.1719" y2="1646.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="69" y="1641.3154">35</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250" x="87" y="1641.3154">register test and informs operation success</text><!--MD5=[00b51029f50ea58481d8271606824731]
@startuml
'https://plantuml.com/sequence-diagram

autonumber

actor "Receptionist" as R
activate R


R -> ":RegisterTestUI" : register a test to be performed to a registered client
activate ":RegisterTestUI"
":RegisterTestUI" - -> R: request data (citizenID, nhsCode)
deactivate ":RegisterTestUI"
R -> ":RegisterTestUI" : types requested data


activate ":RegisterTestUI"


":RegisterTestUI" -> ":RegisterTestController": getClient(citizenID)


activate ":RegisterTestController"
":RegisterTestController" -> ":Company" : store = getClientStore()
activate ":Company"
deactivate ":Company"

":RegisterTestController" -> ":store: ClientStore" : cl = getClient(citizenID)
activate ":store: ClientStore"
deactivate ":store: ClientStore"

":RegisterTestController" -> ":ClientMapper" : ClientDto = toDto(cl)
activate ":ClientMapper"
deactivate ":ClientMapper"


deactivate ":RegisterTestController"



":RegisterTestUI" - -> R: shows the client's information and request a confirmation
deactivate ":RegisterTestUI"




R -> ":RegisterTestUI" : confirms the data
activate ":RegisterTestUI"


":RegisterTestUI" -> ":RegisterTestController": getAllTestType()
activate ":RegisterTestController"
":RegisterTestController" -> ":Company": store = getTestTypeStore()
activate ":Company"

deactivate ":Company"
":RegisterTestController" -> ":store: TestTypeStore": listTestType = getAllTestType()
activate ":store: TestTypeStore"
deactivate ":store: TestTypeStore"

":RegisterTestController" -> ":TestTypeMapper": tesTypeDto = toDto(listTestType)
activate ":TestTypeMapper"
deactivate ":TestTypeMapper"
deactivate ":RegisterTestController"
":RegisterTestUI" - -> R: shows the test types and ask to select one
deactivate ":RegisterTestUI"
R -> ":RegisterTestUI": selects the test type
activate ":RegisterTestUI"

":RegisterTestUI" -> ":RegisterTestController": getAllParametersByTestType(testTypeDto)
activate ":RegisterTestController"
":RegisterTestController" -> ":Company": store = getParametersStore()
activate ":Company"
deactivate ":Company"

":RegisterTestController" -> ":store: ParametersStore": listParameters = getAllParametersByTestType(testTypeDto)
activate ":store: ParametersStore"
deactivate ":store: ParametersStore"

":RegisterTestController" -> ":ParametersMapper": list <parametersDto>  = toDto(listParameters)
activate ":ParametersMapper"
deactivate ":ParametersMapper"

deactivate ":RegisterTestController"

":RegisterTestUI" - -> R: show all parameters according to the test type and ask to select one or more
deactivate ":RegisterTestUI"

R -> ":RegisterTestUI": selects the parameter(s) to be analysed
activate ":RegisterTestUI"







":RegisterTestUI" -> ":RegisterTestController": createTest(list <parametersDto>, tesTypeDto, citizenID, nhsCode)
activate ":RegisterTestController"

":RegisterTestController" -> ":TestTypeMapper": tt = toModel(testTypeDto)
activate ":TestTypeMapper"
deactivate ":TestTypeMapper"

":RegisterTestController" -> ":ParametersMapper": parameters = toModel (list <parametersDto> )
activate ":ParametersMapper"
deactivate ":ParametersMapper"






":RegisterTestController" -> ":Company" ++: store = getTestStore()
deactivate ":Company"

":RegisterTestController" -> ":store: TestStore" ++: test = createTest (tt, parameters, nhsCode)

create "test: Test"

":store: TestStore" - -> "test: Test" : create (tt, parameters, nhsCode)
deactivate ":store: TestStore"
deactivate ":RegisterTestController"

":RegisterTestUI" - -> R: show all data and request a confirmation
deactivate ":RegisterTestUI"

R -> ":RegisterTestUI" : confirms the data
activate ":RegisterTestUI"

":RegisterTestUI" -> ":RegisterTestController": saveTest(test)

activate ":RegisterTestController"

":RegisterTestController" -> ":store: TestStore" : saveTest(test)

activate ":store: TestStore"

":store: TestStore" -> ":store: TestStore": validateTest(test)
activate ":store: TestStore"
deactivate ":store: TestStore"
":store: TestStore" -> ":store: TestStore": addTest(test)
activate ":store: TestStore"
deactivate ":store: TestStore"

deactivate ":store: TestStore"

":RegisterTestController" -> "test: Test" : code = generateCode()

activate "test: Test"
deactivate "test: Test"


":RegisterTestUI" - -> R: register test and informs operation success
deactivate ":RegisterTestUI"
@enduml

@startuml

autonumber

actor "Receptionist" as R
activate R


R -> ":RegisterTestUI" : register a test to be performed to a registered client
activate ":RegisterTestUI"
":RegisterTestUI" - -> R: request data (citizenID, nhsCode)
deactivate ":RegisterTestUI"
R -> ":RegisterTestUI" : types requested data


activate ":RegisterTestUI"


":RegisterTestUI" -> ":RegisterTestController": getClient(citizenID)


activate ":RegisterTestController"
":RegisterTestController" -> ":Company" : store = getClientStore()
activate ":Company"
deactivate ":Company"

":RegisterTestController" -> ":store: ClientStore" : cl = getClient(citizenID)
activate ":store: ClientStore"
deactivate ":store: ClientStore"

":RegisterTestController" -> ":ClientMapper" : ClientDto = toDto(cl)
activate ":ClientMapper"
deactivate ":ClientMapper"


deactivate ":RegisterTestController"



":RegisterTestUI" - -> R: shows the client's information and request a confirmation
deactivate ":RegisterTestUI"




R -> ":RegisterTestUI" : confirms the data
activate ":RegisterTestUI"


":RegisterTestUI" -> ":RegisterTestController": getAllTestType()
activate ":RegisterTestController"
":RegisterTestController" -> ":Company": store = getTestTypeStore()
activate ":Company"

deactivate ":Company"
":RegisterTestController" -> ":store: TestTypeStore": listTestType = getAllTestType()
activate ":store: TestTypeStore"
deactivate ":store: TestTypeStore"

":RegisterTestController" -> ":TestTypeMapper": tesTypeDto = toDto(listTestType)
activate ":TestTypeMapper"
deactivate ":TestTypeMapper"
deactivate ":RegisterTestController"
":RegisterTestUI" - -> R: shows the test types and ask to select one
deactivate ":RegisterTestUI"
R -> ":RegisterTestUI": selects the test type
activate ":RegisterTestUI"

":RegisterTestUI" -> ":RegisterTestController": getAllParametersByTestType(testTypeDto)
activate ":RegisterTestController"
":RegisterTestController" -> ":Company": store = getParametersStore()
activate ":Company"
deactivate ":Company"

":RegisterTestController" -> ":store: ParametersStore": listParameters = getAllParametersByTestType(testTypeDto)
activate ":store: ParametersStore"
deactivate ":store: ParametersStore"

":RegisterTestController" -> ":ParametersMapper": list <parametersDto>  = toDto(listParameters)
activate ":ParametersMapper"
deactivate ":ParametersMapper"

deactivate ":RegisterTestController"

":RegisterTestUI" - -> R: show all parameters according to the test type and ask to select one or more
deactivate ":RegisterTestUI"

R -> ":RegisterTestUI": selects the parameter(s) to be analysed
activate ":RegisterTestUI"







":RegisterTestUI" -> ":RegisterTestController": createTest(list <parametersDto>, tesTypeDto, citizenID, nhsCode)
activate ":RegisterTestController"

":RegisterTestController" -> ":TestTypeMapper": tt = toModel(testTypeDto)
activate ":TestTypeMapper"
deactivate ":TestTypeMapper"

":RegisterTestController" -> ":ParametersMapper": parameters = toModel (list <parametersDto> )
activate ":ParametersMapper"
deactivate ":ParametersMapper"






":RegisterTestController" -> ":Company" ++: store = getTestStore()
deactivate ":Company"

":RegisterTestController" -> ":store: TestStore" ++: test = createTest (tt, parameters, nhsCode)

create "test: Test"

":store: TestStore" - -> "test: Test" : create (tt, parameters, nhsCode)
deactivate ":store: TestStore"
deactivate ":RegisterTestController"

":RegisterTestUI" - -> R: show all data and request a confirmation
deactivate ":RegisterTestUI"

R -> ":RegisterTestUI" : confirms the data
activate ":RegisterTestUI"

":RegisterTestUI" -> ":RegisterTestController": saveTest(test)

activate ":RegisterTestController"

":RegisterTestController" -> ":store: TestStore" : saveTest(test)

activate ":store: TestStore"

":store: TestStore" -> ":store: TestStore": validateTest(test)
activate ":store: TestStore"
deactivate ":store: TestStore"
":store: TestStore" -> ":store: TestStore": addTest(test)
activate ":store: TestStore"
deactivate ":store: TestStore"

deactivate ":store: TestStore"

":RegisterTestController" -> "test: Test" : code = generateCode()

activate "test: Test"
deactivate "test: Test"


":RegisterTestUI" - -> R: register test and informs operation success
deactivate ":RegisterTestUI"
@enduml

PlantUML version 1.2021.4(Sun Apr 04 09:49:39 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>