@startuml
autonumber
actor "Administrator" as admin
activate admin

admin -> ":createTestTypeUI" : register a type of test


activate ":createTestTypeUI"
":createTestTypeUI" -> ":createTestTypeController": getAllParameterCategories()


activate ":createTestTypeController"
":createTestTypeController" -> ":Company": store = getParameterCategoryStore()
activate ":Company"
deactivate ":Company"


create "listCategoriesName: list<String>"
":createTestTypeController" -> "listCategoriesName: list<String>": create()


loop for each Parameter Category Object on ParameterCategoryStore
":createTestTypeController" -> "store:ParameterCategoryStore": category = getParameterCategoryByCode(code)


activate "store:ParameterCategoryStore"
deactivate "store:ParameterCategoryStore"
":createTestTypeController" --> "listCategoriesName: list<String>": add(category)
activate "listCategoriesName: list<String>"
deactivate "listCategoriesName: list<String>"
deactivate ":createTestTypeController"
end


":createTestTypeUI" --> admin: shows a list of Parameter Categories
deactivate ":createTestTypeUI"

admin -> ":createTestTypeUI": selects a category from the list

activate ":createTestTypeUI"
":createTestTypeUI" --> admin: request data(code, description, collectingMethod)
deactivate ":createTestTypeUI"
deactivate ":createTestTypeUI"
admin -> ":createTestTypeUI" : types requested data
activate ":createTestTypeUI"
":createTestTypeUI" -> ":createTestTypeController": createTestType(code, description, collectingMethod, CategoryName)
activate ":createTestTypeController"
":createTestTypeController" -> ":Company" : store = getTestTypeStore()
activate ":Company"
deactivate ":Company"
":createTestTypeController" -> "store:TestTypeStore" : tt = createTestType(code, description, collectingMethod, CategoryName)
activate "store:TestTypeStore"
create "tt: TestType"
"store:TestTypeStore" --> "tt: TestType" : create(code, description, collectingMethod, categoryName)
deactivate "store:TestTypeStore"
":createTestTypeController" -> "store:TestTypeStore" : validateTestType(tt)
activate "store:TestTypeStore"
deactivate "store:TestTypeStore"
deactivate ":createTestTypeController"
":createTestTypeUI" --> admin: validates the data, shows it and requests a confirmation
deactivate ":createTestTypeUI"
admin -> ":createTestTypeUI": confirms the data
activate ":createTestTypeUI"
":createTestTypeUI" -> ":createTestTypeController": saveTestType()
activate ":createTestTypeController"

":createTestTypeController" -> "store:TestTypeStore"++ : saveTestType(tt)
"store:TestTypeStore" -> "store:TestTypeStore": validate(tt)
activate "store:TestTypeStore"
deactivate "store:TestTypeStore"
"store:TestTypeStore" -> "store:TestTypeStore": add(tt)
activate "store:TestTypeStore"
deactivate "store:TestTypeStore"

deactivate ":createTestTypeController"
":createTestTypeUI" --> admin: adds test to list and informs operation success
deactivate ":createTestTypeUI"
@enduml